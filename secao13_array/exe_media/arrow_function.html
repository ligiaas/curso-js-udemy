<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title></title>
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/css/bootstrap.min.css" integrity="sha384-9gVQ4dYFwwWSjIDZnLEWnxCjeSWFphJiwGPXr1jddIhOegiu1FwO5qRGvFXOdJZ4" crossorigin="anonymous">
    
    <script src="beluga.js"></script>
</head>
<body>
    <div class="container">
        <h1>Curso Javascript Completo 2018</h1>
    </div>
    
    <section>
    	<div class="container">
        
	      	<h2>Média dos alunos</h2>
			<table class="table js-tabela">
				<thead>
					<tr>
						<th>Nome</th>
						<th>Nota 1</th>
						<th>Nota 2</th>
						<th>Nota 3</th>
						<th>Nota 4</th>
						<th>Média</th>
					</tr>
				</thead>
				<tbody>
					<tr class="aluno" >
						<td class="aluno-nome">Gertrude</td>
						<td class="aluno-n1">10</td>
						<td class="aluno-n2">8.5</td>
						<td class="aluno-n3">9</td>
						<td class="aluno-n4">7.5</td>	
						<td class="aluno-m"></td>
					</tr>

					<tr class="aluno" >
						<td class="aluno-nome">Rey</td>
						<td class="aluno-n1">0.00</td>
						<td class="aluno-n2">8.5</td>
						<td class="aluno-n3">6.5</td>
						<td class="aluno-n4">7.5</td>
						<td class="aluno-m"></td>
					</tr>

					<tr class="aluno" >
						<td class="aluno-nome">Jessilda</td>
						<td class="aluno-n1">8</td>
						<td class="aluno-n2">8.5</td>
						<td class="aluno-n3">7</td>
						<td class="aluno-n4">7.5</td>
						<td class="aluno-m"></td>
					</tr>

					<tr class="aluno">
						<td class="aluno-nome">Lindóia</td>
						<td class="aluno-n1">0.00</td>
						<td class="aluno-n2">8.5</td>
						<td class="aluno-n3">10</td>
						<td class="aluno-n4">7.5</td>
						<td class="aluno-m"></td>
					</tr>
					<tr class="aluno" >
						<td class="aluno-nome">Creysson</td>
						<td class="aluno-n1">10</td>
						<td class="aluno-n2">9.5</td>
						<td class="aluno-n3">10</td>
						<td class="aluno-n4">8.5</td>
						<td class="aluno-m"></td>
					</tr>
				</tbody>
			</table>
        	
    	</div>	
    </section>

    <script>
        (function (argument) {
        	'use strict'
        	var trs = document.querySelectorAll('.js-tabela tbody .aluno');
        	var x = 0;

        	while(trs[x]) {
        		var linhaAluno = trs[x];
        		var tds = linhaAluno.querySelectorAll('td');
        		var notas = recuperarValoresDeColunas(tds);

        		// var temZero = notas.some(function(notas){
        		// 	return notas == 0.00;
        		// });

        		/* Arrow functions
        		Uma expressão arrow function possui uma sintaxe mais curta quando comparada a uma expressão de função (function expression) e não faz o bind do this. Arrow functions sempre são anônimas. */

        		/* 1ª versão Arrow function
        		Exclui a palavra function e faz o símbolo de flecha com =>
        		var temZero = notas.some((notas) => {
        			return notas == 0.00;
        		}); */

        		/* 2ª versão Arrow function
        		Se só tem 1 parâmetro eu não preciso colocá-lo em parênteses
        		var temZero = notas.some(notas => {
        			return notas == 0.00;
        		}); */

        		/* 3ª versão Arrow function
        		Se a função só tem 1 única linha tbm não precisa de chaves e tbm não pode ter a palavra return, pois a instrução já é o próprio retorno. */
        		var temZero = notas.some(notas => notas == 0.00);

        		var mensagem = temZero ? 'REPROVADO' : calcularMedia.apply(this, notas);
        		linhaAluno.querySelector('.aluno-m').textContent = mensagem;
        		x++;
        	}

        	function recuperarValoresDeColunas(tds){
        		var x = 0;
        		var arr = [];
        		while(tds[x]){
        			if(!isNaN(tds[x].textContent) && tds[x].textContent !== ''){
        				arr.push(parseFloat(tds[x].textContent));
        			}
        			x++;
        		}
        		return arr;
        	}
        })() // NÃO ESQUECER QUE FUNÇÃO AUTO-INVOCÁVEL TEM QUE TERMINAR COM ()
        
    </script>
    
</body>
</html>