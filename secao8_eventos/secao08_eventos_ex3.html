<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Curso Javascript Completo 2018</title>
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/css/bootstrap.min.css" integrity="sha384-9gVQ4dYFwwWSjIDZnLEWnxCjeSWFphJiwGPXr1jddIhOegiu1FwO5qRGvFXOdJZ4" crossorigin="anonymous">
</head>
<body>
	<div class="container">
		<h1>Contagem de caracteres</h1>
		<h2>Problema</h2>
		<p>Num textarea com um número máximo do caracteres permitidos, mostrar numa span o número de caracteres restantes e indicar pro usuário quando restam apenas 50 caracteres.</p>
		<textarea name="" id="msg" cols="30" rows="10" maxlength="50"></textarea>
		<div id="restaContainer" style="display: none;">
			<p>Restam <span id="resta"></span> caracteres</p>
		</div>
	</div>
	<script>
		(function() {
			'use strict';
			var $txtMsg = document.getElementById('msg');
			var $restaContainer = document.getElementById('restaContainer');
			var $resta = document.getElementById('resta');
			var maxima = $txtMsg.maxLength;

			function mostrarContainerResta(){
				$restaContainer.style.display = 'block';
			}
			
			mostrarContainerResta();
			mostrarCaracteresRestantes(maxima);
			$txtMsg.addEventListener('input', checkLength);

			function checkLength(e){
				var caracterDigitado = this.value.length;
				var caracteresRestantes = parseInt(maxima) - parseInt(caracterDigitado);
				mostrarCaracteresRestantes(caracteresRestantes);
			}

			function mostrarCaracteresRestantes(n){
				$resta.textContent = n;
			}
		})()
	</script>
</body>
</html>






